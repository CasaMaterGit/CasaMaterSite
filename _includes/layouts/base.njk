<!doctype html>
<html lang="{{ metadata.language or 'pt-BR' }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="/img/logo.png">
  <title>{{ title or metadata.title }}</title>
  <meta name="description" content="{{ description or metadata.description }}">
  
  <!-- CSS -->
  <style>{% include "css/index.css" %}</style>
  <style>{% getBundle "css" %}</style>

  <!-- Optional JS -->
  <script type="module">{% include "node_modules/@zachleat/heading-anchors/heading-anchors.js" %}</script>
</head>

<body class="{{ bodyClass or (title | slug) or 'home' }}">


  <!-- Skip link -->
  <a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

  <!-- Header / Menu -->
  <header class="site-header">
    <div class="site-logo">
      <a href="/" aria-label="Voltar para a página inicial">
        <img src="/img/logo.png" alt="Casa Mater" eleventy:ignore>
      </a>
    </div>
        
    <nav>
      <ul class="nav">
        {%- for page in collections.all | eleventyNavigation %}
          {%- set hasChildren = page.children and page.children.length > 0 %}

          <li class="nav-item {% if hasChildren %}has-submenu{% endif %}">
            
            <a href="{{ page.url }}">
              {{ page.title }}
            </a>

            {% if hasChildren %}
              <ul class="submenu">
                {% for child in page.children %}
                  <li>
                    <a href="{{ child.url }}">
                      {{ child.title }}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            {% endif %}

          </li>
        {%- endfor %}
      </ul>
    </nav>

  </header>

  <!-- Main Content -->
  <main id="main">
      {% if home_section_1 %}
        <section class="home-section section-white reveal">
          {{ home_section_1 | safe }}
        </section>
      {% endif %}

      {% if home_section_2 %}
        <section class="home-section section-magenta reveal">
          {{ home_section_2 | safe }}
        </section>
      {% endif %}

      {# SERVIÇOS #}
      {% if services %}
        <section class="home-section section-white reveal">
          {{ services | safe }}
        </section>
      {% endif %}

      {% if upcoming_events %}
        <section class="home-section section-magenta reveal">
          {{ upcoming_events | safe }}
        </section>
      {% endif %}

      {# PÁGINAS GERAIS#}
      {% if content %}
 
        {% if title == "Nuestros Servicios y Actividades" %}
          {{ content | safe }}
        {% else %}
          <section class="home-section reveal">
            <div class="content">

              {% if title and title != "Home" and not hideTitle %}
                <h1 class="page-title">{{ title }}</h1>
              {% endif %}

              {{ content | safe }}
            </div>
          </section>
        {% endif %}
      {% endif %}

  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container footer-content">

      <!-- Contato -->
      <div class="footer-contact">
        <a href="mailto:casa_mater22@gmail.com" target="_blank" class="footer-link">
          <!-- Ícone de email -->
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 13.065L1.6 6h20.8L12 13.065zM12 15L1 8v11h22V8L12 15z"/>
          </svg>
          casa_mater22@gmail.com
        </a>

        <a href="https://www.instagram.com/casa_mater/" target="_blank" class="footer-link">
          <!-- Ícone Instagram -->
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.17.054 1.97.24 2.427.403a4.92 4.92 0 011.757 1.043 4.92 4.92 0 011.043 1.757c.164.457.35 1.257.403 2.427.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.054 1.17-.24 1.97-.403 2.427a4.92 4.92 0 01-1.043 1.757 4.92 4.92 0 01-1.757 1.043c-.457.164-1.257.35-2.427.403-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.17-.054-1.97-.24-2.427-.403a4.92 4.92 0 01-1.757-1.043 4.92 4.92 0 01-1.043-1.757c-.164-.457-.35-1.257-.403-2.427C2.175 15.584 2.163 15.204 2.163 12s.012-3.584.07-4.85c.054-1.17.24-1.97.403-2.427a4.92 4.92 0 011.043-1.757 4.92 4.92 0 011.757-1.043c.457-.164 1.257-.35 2.427-.403C8.416 2.175 8.796 2.163 12 2.163zm0 1.838c-3.178 0-3.556.012-4.807.069-1.042.045-1.607.212-1.983.353a3.05 3.05 0 00-1.101.71 3.05 3.05 0 00-.71 1.101c-.141.376-.308.941-.353 1.983-.057 1.251-.069 1.629-.069 4.807s.012 3.556.069 4.807c.045 1.042.212 1.607.353 1.983.163.419.38.787.71 1.101.314.33.682.547 1.101.71.376.141.941.308 1.983.353 1.251.057 1.629.069 4.807.069s3.556-.012 4.807-.069c1.042-.045 1.607-.212 1.983-.353a3.05 3.05 0 001.101-.71 3.05 3.05 0 00.71-1.101c.141-.376.308-.941.353-1.983.057-1.251.069-1.629.069-4.807s-.012-3.556-.069-4.807c-.045-1.042-.212-1.607-.353-1.983a3.05 3.05 0 00-.71-1.101 3.05 3.05 0 00-1.101-.71c-.376-.141-.941-.308-1.983-.353-1.251-.057-1.629-.069-4.807-.069zM12 5.838a6.162 6.162 0 106.162 6.162A6.162 6.162 0 0012 5.838zm0 10.162a4 4 0 114-4 4 4 0 01-4 4zm6.406-11.845a1.44 1.44 0 11-1.44-1.44 1.44 1.44 0 011.44 1.44z"/>
          </svg>
          @casa_mater
        </a>

      </div>
        <p>
          <strong>© Casa Mater</strong> — Todos los derechos reservados
        </p>
        
        <p class="footer-dev">
          Desarrollo Web por <strong>Juliana Rodrigues</strong>
        </p>
   
    </div>
  </footer>

  <!-- JS Bundle -->
  <script type="module" src="{% getBundleFileUrl "js" %}"></script>

  <!-- Scroll Reveal -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const reveals = document.querySelectorAll(".reveal");

      if (window.innerWidth <= 768) {
        // Mobile: todas as seções ficam visíveis sem scroll
        reveals.forEach(el => el.classList.add("is-visible"));
        return;
      }

      // Desktop: mantém o efeito original
      const observer = new IntersectionObserver(
        entries => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add("is-visible");
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.15 }
      );

      reveals.forEach(el => observer.observe(el));
    });

  </script>

  <!-- Menu Reveal -->
  <script>
    const header = document.querySelector('.site-header');
    let lastScroll = window.scrollY;

    // no topo, o menu começa visível
    header.classList.remove('is-hidden');

    window.addEventListener('scroll', () => {
      const currentScroll = window.scrollY;

      // se estiver no topo → sempre visível
      if (currentScroll <= 0) {
        header.classList.remove('is-hidden');
        lastScroll = 0;
        return;
      }

      // rolando para cima → esconde
      if (currentScroll < lastScroll) {
        header.classList.add('is-hidden');
      } 
      // rolando para baixo → mostra
      else {
        header.classList.remove('is-hidden');
      }

      lastScroll = currentScroll;
    });
  </script>
  
  <!-- Menu galery -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const track = document.querySelector(".gallery-track");
      const prev = document.querySelector(".gallery-arrow.left");
      const next = document.querySelector(".gallery-arrow.right");

      let items = Array.from(document.querySelectorAll(".gallery-item"));

      const visible = window.innerWidth <= 768 ? 1 : 3;
      let index = visible;

      // clona últimos
      items.slice(-visible).forEach(item => {
        const clone = item.cloneNode(true);
        clone.classList.add("clone");
        track.prepend(clone);
      });

      // clona primeiros
      items.slice(0, visible).forEach(item => {
        const clone = item.cloneNode(true);
        clone.classList.add("clone");
        track.appendChild(clone);
      });

      // atualiza lista após clonar
      items = Array.from(document.querySelectorAll(".gallery-item"));

      const total = items.length;

      function update(animate = true) {
        track.style.transition = animate ? "transform 0.5s ease" : "none";
        const move = (100 / visible) * index;
        track.style.transform = `translateX(-${move}%)`;
      }

      // posição inicial
      update(false);

      next.addEventListener("click", () => {
        index++;
        update();

        if (index === total - visible) {
          setTimeout(() => {
            index = visible;
            update(false);
          }, 500);
        }
      });

      prev.addEventListener("click", () => {
        index--;
        update();

        if (index === 0) {
          setTimeout(() => {
            index = total - visible * 2;
            update(false);
          }, 500);
        }
      });
    });
  </script>

</body>
</html>
